using System;
using Microsoft.AspNetCore.Mvc;
using SistemaHoteleiro.Models;


namespace Produto.Controllers
{
    private readonly DataContext _context;

    public ProdutoController(DataContext context)
    {
        _context = context;
    }


    //Post: /Hotel/produto/cadastro
    [Route("cadastro")]
    [httpPost]

    public IActionResult Create([FromBody] Produto produto)
    {
        _context.Produto.Add(produto);
        _context.SaveChanges();
        return Created("", produto);
    }

    //Get: /Hotel/produto/delete
    [httpDelete]
    [Route("delete/{CodProduto}")]

    public IActionResult Delete(int CodProduto)
    {
        Produto produto = _context.Produto.FirstOrDefault (produto => produto.CodProduto == CodProduto);
        if (produto == null)
        {
            return NotFound("Esse produto nÃ£o consta  em nosso banco de dados. Verifique se preencheu os campos corretamente");

        }
        _context.Produto.Remove(produto);
        _context.SaveChanges();
        return Ok(produto);
    }

    //Put: /Hotel/produto/alterar
    [Route("update")]
    [HttpPut]

    public IActionResult Update([FromBody] Produto produto)
    {
        _context.Produto.Update(produto);
        _context.SaveChanges();
        return Ok(produto);
    }

    //GET: /hotel/cliente/consulta
    //[Route("consulta")]
    //[HttpGet]
    //public IActionResult Read() => Ok(_context.Cliente.Read());


    //POST: /hotel/produto/lista
    [Route("Lista")]
    [HttpGet]
    public IActionResult List() => Ok(_context.Produto.ToList());
    {
        _content.SaveChanges();
        return Ok(produto);
    }

    //Post: /Hotel/produto/ConsultarDados
    public IActionResult ConsultarDados([FromBody] Produto produto)
    {
        return (produto);
    }
}